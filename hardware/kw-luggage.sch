EESchema Schematic File Version 2  date 2012-05-21T21:48:12 CEST
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:special
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:kw-luggage-cache
EELAYER 25  0
EELAYER END
$Descr A4 11700 8267
encoding utf-8
Sheet 1 3
Title ""
Date "21 may 2012"
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	1250 6000 950  6000
Wire Wire Line
	1250 6200 950  6200
Wire Wire Line
	1850 5800 1850 6000
Wire Wire Line
	1850 6000 1550 6000
Wire Wire Line
	6350 6850 6200 6850
Wire Wire Line
	7350 6850 7350 6950
Connection ~ 7150 3350
Wire Wire Line
	7150 3350 7150 3850
Wire Wire Line
	7150 3850 7250 3850
Wire Wire Line
	6350 5050 6200 5050
Wire Wire Line
	4150 5850 4300 5850
Wire Wire Line
	6200 6350 6350 6350
Wire Wire Line
	6200 6150 6350 6150
Connection ~ 1000 3800
Wire Wire Line
	1000 3700 1000 3900
Wire Wire Line
	700  4300 700  4500
Wire Wire Line
	6350 7250 6200 7250
Wire Wire Line
	6350 7050 6200 7050
Wire Wire Line
	4300 5150 4150 5150
Wire Wire Line
	4150 5150 4150 5450
Wire Wire Line
	3800 5150 3800 5350
Wire Wire Line
	3800 5350 4300 5350
Wire Wire Line
	7600 6600 7750 6600
Wire Wire Line
	8550 6500 8700 6500
Wire Wire Line
	7600 6200 7750 6200
Wire Wire Line
	8700 6200 8550 6200
Connection ~ 8550 5650
Wire Wire Line
	8550 6000 8550 5550
Wire Wire Line
	7750 6100 7600 6100
Wire Wire Line
	7600 6100 7600 5800
Wire Wire Line
	7750 6000 7300 6000
Wire Wire Line
	10050 6950 10050 6800
Connection ~ 1300 3800
Wire Wire Line
	1300 3900 1300 3800
Wire Wire Line
	1900 4100 1900 4500
Connection ~ 2600 3800
Wire Wire Line
	2600 3900 2600 3800
Wire Wire Line
	3300 3800 3500 3800
Connection ~ 3300 2200
Wire Wire Line
	3500 3300 3500 2200
Wire Wire Line
	3500 2200 3000 2200
Wire Wire Line
	8250 3250 9350 3250
Connection ~ 9100 4600
Wire Wire Line
	9450 4850 9450 5250
Wire Wire Line
	9450 4150 9450 4350
Connection ~ 9450 1000
Wire Wire Line
	7750 3850 8000 3850
Wire Wire Line
	8600 3650 8600 4100
Connection ~ 9350 2700
Wire Wire Line
	3300 2200 3300 1500
Wire Wire Line
	3300 1500 3000 1500
Wire Wire Line
	9550 1000 3000 1000
Wire Wire Line
	3000 2700 6250 2700
Wire Wire Line
	6750 2700 9550 2700
Wire Wire Line
	8250 3450 8250 3700
Wire Wire Line
	8500 3850 8600 3850
Connection ~ 8600 3850
Wire Wire Line
	9350 3250 9350 2700
Connection ~ 8600 3250
Wire Wire Line
	9450 3650 9450 1000
Wire Wire Line
	9100 5100 9100 5250
Wire Wire Line
	9100 4600 9100 4700
Wire Wire Line
	3300 3100 3300 2700
Connection ~ 3300 2700
Wire Wire Line
	3500 3800 3500 3700
Wire Wire Line
	2800 3800 2300 3800
Wire Wire Line
	2600 4500 2600 4300
Wire Wire Line
	1300 4500 1300 4300
Wire Wire Line
	10050 5850 10050 6000
Wire Wire Line
	10050 6000 10200 6000
Wire Wire Line
	10200 6200 10050 6200
Wire Wire Line
	10050 6200 10050 6300
Wire Wire Line
	7850 5650 8550 5650
Wire Wire Line
	7300 6050 7300 5650
Wire Wire Line
	7300 5650 7350 5650
Connection ~ 7300 6000
Wire Wire Line
	8700 6100 8550 6100
Wire Wire Line
	8700 6600 8550 6600
Wire Wire Line
	7750 6500 7600 6500
Wire Wire Line
	5200 4500 5200 4650
Wire Wire Line
	4300 5250 3800 5250
Connection ~ 3800 5250
Wire Wire Line
	4150 4950 4300 4950
Wire Wire Line
	6350 7150 6200 7150
Wire Wire Line
	5200 7650 5200 7550
Wire Wire Line
	1000 4300 1000 4500
Wire Wire Line
	700  3900 700  3800
Wire Wire Line
	700  3800 1500 3800
Wire Wire Line
	6350 6250 6200 6250
Wire Wire Line
	6350 6050 6200 6050
Wire Wire Line
	6350 6450 6200 6450
Wire Wire Line
	4300 5650 4150 5650
Wire Wire Line
	7000 3350 7250 3350
Wire Wire Line
	6350 4950 6200 4950
Wire Wire Line
	8900 4600 9300 4600
Wire Wire Line
	6350 5950 6200 5950
Wire Wire Line
	6950 6850 6850 6850
Wire Wire Line
	1850 6100 1550 6100
Wire Wire Line
	1850 6500 1850 6200
Wire Wire Line
	1850 6200 1550 6200
Wire Wire Line
	950  6100 1250 6100
Text GLabel 1850 6100 2    60   Input ~ 0
MOSI
$Comp
L GND #PWR?
U 1 1 4FBA9B69
P 1850 6500
F 0 "#PWR?" H 1850 6500 30  0001 C CNN
F 1 "GND" H 1850 6430 30  0001 C CNN
	1    1850 6500
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 4FBA9B65
P 1850 5800
F 0 "#PWR?" H 1850 5890 20  0001 C CNN
F 1 "+5V" H 1850 5890 30  0000 C CNN
	1    1850 5800
	1    0    0    -1  
$EndComp
Text GLabel 950  6200 0    60   Input ~ 0
~Reset
Text GLabel 950  6100 0    60   Input ~ 0
SCK
Text GLabel 950  6000 0    60   Input ~ 0
MISO
$Comp
L AVR-ISP-6 J?
U 1 1 4FBA9B2E
P 1400 6100
F 0 "J?" H 1250 6350 50  0000 C CNN
F 1 "AVR-ISP-6" H 1150 5825 50  0000 L BNN
F 2 "AVR-ISP-6" V 900 6100 50  0001 C CNN
	1    1400 6100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB952EE
P 7350 6950
F 0 "#PWR?" H 7350 6950 30  0001 C CNN
F 1 "GND" H 7350 6880 30  0001 C CNN
	1    7350 6950
	1    0    0    -1  
$EndComp
$Comp
L LED D?
U 1 1 4FB952EB
P 7150 6850
F 0 "D?" H 7150 6950 50  0000 C CNN
F 1 "LED" H 7150 6750 50  0000 C CNN
	1    7150 6850
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 4FB952E8
P 6600 6850
F 0 "R?" V 6680 6850 50  0000 C CNN
F 1 "390" V 6600 6850 50  0000 C CNN
	1    6600 6850
	0    1    1    0   
$EndComp
Text GLabel 6350 5950 2    60   Input ~ 0
Serial-out
Text GLabel 8900 4600 0    60   Input ~ 0
VoltageADC
Text GLabel 6350 5050 2    60   Input ~ 0
VoltageADC
Text GLabel 6350 4950 2    60   Input ~ 0
CurrentADC
Text GLabel 7000 3350 0    60   Input ~ 0
CurrentADC
Text GLabel 6350 6450 2    60   Input ~ 0
D7
Text GLabel 6350 6350 2    60   Input ~ 0
D6
Text GLabel 4150 5850 0    60   Input ~ 0
D5
Text GLabel 4150 5650 0    60   Input ~ 0
D4
Text GLabel 6350 6250 2    60   Input ~ 0
Enable
Text GLabel 6350 6150 2    60   Input ~ 0
R/~W
Text GLabel 6350 6050 2    60   Input ~ 0
RS
$Comp
L GND #PWR?
U 1 1 4FB94F93
P 700 4500
F 0 "#PWR?" H 700 4500 30  0001 C CNN
F 1 "GND" H 700 4430 30  0001 C CNN
	1    700  4500
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB94F8F
P 1000 4500
F 0 "#PWR?" H 1000 4500 30  0001 C CNN
F 1 "GND" H 1000 4430 30  0001 C CNN
	1    1000 4500
	1    0    0    -1  
$EndComp
$Comp
L C C?
U 1 1 4FB94F89
P 700 4100
F 0 "C?" H 750 4200 50  0000 L CNN
F 1 "100n" H 750 4000 50  0000 L CNN
	1    700  4100
	1    0    0    -1  
$EndComp
$Comp
L C C?
U 1 1 4FB94F83
P 1000 4100
F 0 "C?" H 1050 4200 50  0000 L CNN
F 1 "100n" H 1050 4000 50  0000 L CNN
	1    1000 4100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB94F79
P 5200 7650
F 0 "#PWR?" H 5200 7650 30  0001 C CNN
F 1 "GND" H 5200 7580 30  0001 C CNN
	1    5200 7650
	1    0    0    -1  
$EndComp
Text GLabel 6350 7050 2    60   Input ~ 0
MOSI
Text GLabel 6350 7150 2    60   Input ~ 0
MISO
Text GLabel 6350 7250 2    60   Input ~ 0
SCK
Text GLabel 4150 4950 0    60   Input ~ 0
~Reset
$Comp
L GND #PWR?
U 1 1 4FB94F1E
P 4150 5450
F 0 "#PWR?" H 4150 5450 30  0001 C CNN
F 1 "GND" H 4150 5380 30  0001 C CNN
	1    4150 5450
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 4FB94A4C
P 3800 5150
F 0 "#PWR?" H 3800 5240 20  0001 C CNN
F 1 "+5V" H 3800 5240 30  0000 C CNN
	1    3800 5150
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 4FB94A42
P 5200 4500
F 0 "#PWR?" H 5200 4590 20  0001 C CNN
F 1 "+5V" H 5200 4590 30  0000 C CNN
	1    5200 4500
	1    0    0    -1  
$EndComp
$Comp
L ATMEGA8-P IC?
U 1 1 4FB94A2B
P 5200 6050
F 0 "IC?" H 4500 7300 50  0000 L BNN
F 1 "ATMEGA8-P" H 5450 4650 50  0000 L BNN
F 2 "DIL28" H 5700 4575 50  0001 C CNN
	1    5200 6050
	1    0    0    -1  
$EndComp
Text GLabel 8700 6600 2    60   Input ~ 0
D7
Text GLabel 7600 6600 0    60   Input ~ 0
D6
Text GLabel 8700 6500 2    60   Input ~ 0
D5
Text GLabel 7600 6500 0    60   Input ~ 0
D4
Text GLabel 7600 6200 0    60   Input ~ 0
R/~W
Text GLabel 8700 6200 2    60   Input ~ 0
Enable
Text GLabel 8700 6100 2    60   Input ~ 0
RS
Text Notes 7450 5500 0    60   ~ 0
Contrast
$Comp
L GND #PWR?
U 1 1 4FB94873
P 7300 6050
F 0 "#PWR?" H 7300 6050 30  0001 C CNN
F 1 "GND" H 7300 5980 30  0001 C CNN
	1    7300 6050
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 4FB94863
P 8550 5550
F 0 "#PWR?" H 8550 5640 20  0001 C CNN
F 1 "+5V" H 8550 5640 30  0000 C CNN
	1    8550 5550
	1    0    0    -1  
$EndComp
$Comp
L POT RV?
U 1 1 4FB9483F
P 7600 5650
F 0 "RV?" H 7600 5550 50  0000 C CNN
F 1 "2k2" H 7600 5650 50  0000 C CNN
	1    7600 5650
	-1   0    0    1   
$EndComp
$Comp
L +5V #PWR?
U 1 1 4FB947FC
P 10050 5850
F 0 "#PWR?" H 10050 5940 20  0001 C CNN
F 1 "+5V" H 10050 5940 30  0000 C CNN
	1    10050 5850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB947F1
P 10050 6950
F 0 "#PWR?" H 10050 6950 30  0001 C CNN
F 1 "GND" H 10050 6880 30  0001 C CNN
	1    10050 6950
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 4FB947DC
P 10050 6550
F 0 "R?" V 10130 6550 50  0000 C CNN
F 1 "10 Ohm" V 10050 6550 50  0000 C CNN
	1    10050 6550
	1    0    0    -1  
$EndComp
$Comp
L CONN_7X2 P?
U 1 1 4FB947BB
P 8150 6300
F 0 "P?" H 8150 6700 60  0000 C CNN
F 1 "HD44780" V 8150 6300 60  0000 C CNN
	1    8150 6300
	1    0    0    -1  
$EndComp
$Comp
L CONN_2 P?
U 1 1 4FB9479E
P 10550 6100
F 0 "P?" V 10500 6100 40  0000 C CNN
F 1 "Backlight" V 10600 6100 40  0000 C CNN
	1    10550 6100
	1    0    0    -1  
$EndComp
Text Notes 2900 3950 0    60   ~ 0
3x 10 Ohm (100 mW / resistor)
$Comp
L +5V #PWR?
U 1 1 4FB941D2
P 1000 3700
F 0 "#PWR?" H 1000 3790 20  0001 C CNN
F 1 "+5V" H 1000 3790 30  0000 C CNN
	1    1000 3700
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB941A7
P 1900 4500
F 0 "#PWR?" H 1900 4500 30  0001 C CNN
F 1 "GND" H 1900 4430 30  0001 C CNN
	1    1900 4500
	-1   0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB941A3
P 1300 4500
F 0 "#PWR?" H 1300 4500 30  0001 C CNN
F 1 "GND" H 1300 4430 30  0001 C CNN
	1    1300 4500
	-1   0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB9419C
P 2600 4500
F 0 "#PWR?" H 2600 4500 30  0001 C CNN
F 1 "GND" H 2600 4430 30  0001 C CNN
	1    2600 4500
	-1   0    0    -1  
$EndComp
$Comp
L C C?
U 1 1 4FB9418F
P 1300 4100
F 0 "C?" H 1200 4200 50  0000 L CNN
F 1 "220u" H 1100 4000 50  0000 L CNN
	1    1300 4100
	-1   0    0    -1  
$EndComp
$Comp
L 7805 U?
U 1 1 4FB9418A
P 1900 3850
F 0 "U?" H 2050 3654 60  0000 C CNN
F 1 "7805" H 1900 4050 60  0000 C CNN
	1    1900 3850
	-1   0    0    -1  
$EndComp
$Comp
L C C?
U 1 1 4FB9417D
P 2600 4100
F 0 "C?" H 2650 4200 50  0000 L CNN
F 1 "220u" H 2650 4000 50  0000 L CNN
	1    2600 4100
	-1   0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 4FB94167
P 3050 3800
F 0 "R?" V 3130 3800 50  0000 C CNN
F 1 "30 Ohm" V 3050 3800 50  0000 C CNN
	1    3050 3800
	0    1    -1   0   
$EndComp
$Comp
L DIODE D?
U 1 1 4FB94161
P 3500 3500
F 0 "D?" H 3500 3600 40  0000 C CNN
F 1 "DIODE" H 3500 3400 40  0000 C CNN
	1    3500 3500
	0    -1   1    0   
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB94111
P 3300 3100
F 0 "#PWR?" H 3300 3100 30  0001 C CNN
F 1 "GND" H 3300 3030 30  0001 C CNN
	1    3300 3100
	1    0    0    -1  
$EndComp
Text Notes 8600 4550 0    60   ~ 0
1 V / 6 Vout
$Comp
L GND #PWR?
U 1 1 4FB93FF8
P 9100 5250
F 0 "#PWR?" H 9100 5250 30  0001 C CNN
F 1 "GND" H 9100 5180 30  0001 C CNN
	1    9100 5250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB93FF3
P 9450 5250
F 0 "#PWR?" H 9450 5250 30  0001 C CNN
F 1 "GND" H 9450 5180 30  0001 C CNN
	1    9450 5250
	1    0    0    -1  
$EndComp
$Comp
L C C?
U 1 1 4FB93FE5
P 9100 4900
F 0 "C?" H 9150 5000 50  0000 L CNN
F 1 "100n" H 9150 4800 50  0000 L CNN
	1    9100 4900
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 4FB93FAC
P 9450 3900
F 0 "R?" V 9530 3900 50  0000 C CNN
F 1 "5k6" V 9450 3900 50  0000 C CNN
	1    9450 3900
	1    0    0    -1  
$EndComp
$Comp
L POT RV?
U 1 1 4FB93F9E
P 9450 4600
F 0 "RV?" H 9450 4500 50  0000 C CNN
F 1 "2k2" H 9450 4600 50  0000 C CNN
	1    9450 4600
	0    -1   -1   0   
$EndComp
Text Notes 6250 2900 0    60   ~ 0
1 mV / 1 A
Text Notes 6300 3300 0    60   ~ 0
50 mV / A (5 V is 100 A)
$Comp
L POT RV?
U 1 1 4FB93DF7
P 8250 3850
F 0 "RV?" H 8250 3750 50  0000 C CNN
F 1 "2k2" H 8250 3850 50  0000 C CNN
	1    8250 3850
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 4FB93D57
P 7500 3850
F 0 "R?" V 7580 3850 50  0000 C CNN
F 1 "51k" V 7500 3850 50  0000 C CNN
	1    7500 3850
	0    1    1    0   
$EndComp
$Comp
L GND #PWR?
U 1 1 4FB93D4E
P 8600 4100
F 0 "#PWR?" H 8600 4100 30  0001 C CNN
F 1 "GND" H 8600 4030 30  0001 C CNN
	1    8600 4100
	1    0    0    -1  
$EndComp
$Comp
L C C?
U 1 1 4FB93D38
P 8600 3450
F 0 "C?" H 8650 3550 50  0000 L CNN
F 1 "100n" H 8650 3350 50  0000 L CNN
	1    8600 3450
	1    0    0    -1  
$EndComp
$Comp
L LM358 U?
U 1 1 4FB93D07
P 7750 3350
F 0 "U?" H 7700 3550 60  0000 L CNN
F 1 "LM358" H 7700 3100 60  0000 L CNN
	1    7750 3350
	-1   0    0    -1  
$EndComp
Text Notes 5250 2600 0    60   ~ 0
1 miliohm shunt resistor is provided by 30 cm 6 mmÂ² wire.
$Comp
L R R?
U 1 1 4FB93B85
P 6500 2700
F 0 "R?" V 6580 2700 50  0000 C CNN
F 1 "1 mOhm" V 6500 2700 50  0000 C CNN
	1    6500 2700
	0    1    1    0   
$EndComp
Text GLabel 9550 1000 2    60   Output ~ 0
+24 V output
Text GLabel 9550 2700 2    60   Output ~ 0
0 V output
$Sheet
S 1000 2000 2000 900 
U 4FB937BB
F0 "Power supply 2" 60
F1 "psu.sch" 60
F2 "0 V" O R 3000 2700 60 
F3 "+ 12V" O R 3000 2200 60 
$EndSheet
$Sheet
S 1000 800  2000 900 
U 4FB9379F
F0 "Power supply 1" 60
F1 "psu.sch" 60
F2 "0 V" I R 3000 1500 60 
F3 "+ 12V" I R 3000 1000 60 
$EndSheet
$EndSCHEMATC
